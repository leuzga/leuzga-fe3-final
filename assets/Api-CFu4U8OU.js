import{r}from"./index-BQQnG_C6.js";const l=(t,e)=>{switch(e.type){case"FETCH_USERS_SUCCESS":return{...t,loading:!1,users:e.payload};case"FETCH_USER_DETAILS_SUCCESS":return{...t,loading:!1,userDetails:e.payload,error:null};case"FETCH_ERROR":return{...t,loading:!1,error:e.payload};default:return t}},u=()=>{const t={users:[],loading:!0,error:null},[e,a]=r.useReducer(l,t);return r.useEffect(()=>{(async()=>{try{const s=await fetch("https://jsonplaceholder.typicode.com/users");if(!s.ok)throw new Error("Failed to fetch users");const o=await s.json();a({type:"FETCH_USERS_SUCCESS",payload:o})}catch(s){a({type:"FETCH_ERROR",payload:s.message})}})()},[]),r.useMemo(()=>e,[e])},p=()=>{localStorage.removeItem("favorites"),window.dispatchEvent(new Event("favoritesCleared"))},d=()=>{const t={users:[],loading:!0,error:null},[e,a]=r.useReducer(l,t),c=r.useCallback(()=>{try{const s=localStorage.getItem("favorites");if(s){const o=JSON.parse(s);a({type:"FETCH_USERS_SUCCESS",payload:o})}}catch(s){a({type:"FETCH_ERROR",payload:s.message})}},[]);return r.useEffect(()=>{c()},[c]),r.useMemo(()=>e,[e])},S=t=>{const e={userDetails:{},loading:!0,error:null},[a,c]=r.useReducer(l,e),s=r.useCallback(async()=>{try{const o=await fetch(`https://jsonplaceholder.typicode.com/users/${t}`);if(!o.ok)throw new Error("Failed to fetch user details");const n=await o.json();c({type:"FETCH_USER_DETAILS_SUCCESS",payload:n})}catch(o){c({type:"FETCH_ERROR",payload:o.message})}},[t]);return r.useEffect(()=>{s()},[s]),r.useMemo(()=>a,[a])};export{S as a,d as b,p as c,u};
